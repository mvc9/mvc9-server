<!DOCTYPE HTML>
<html>
<head x-include="components/head.tpl" x-render="head"></head>
<body>
<div class="main-rect">
  <div class="head">
    <div class="navi-rect" x-include="components/navi.tpl"></div>
  </div>
  <div class="main-body user-pack-list" x-render="mainBody">
    <div class="content-rect">
      <div class="bread-brumb">
        <span>封装</span>
        <span>我的APP</span>
        <span>列表</span>
      </div>
      <div class="content-body">
        <div class="work-pannel-head">
          <div class="title">我的APP</div>
          <div class="purchase-info" x-render="myPurchaseInfo">
            <span>剩余次数：{{m.myPurchase.limited_nums || 0}}次</span>
            <a href="/pack_purchase?mode=purchase">
              <button class="btn btn-n02">购买套餐</button>
            </a>
          </div>
        </div>
        <div class="operate-pannel">
          <a href="{{m.goPackLink}}" target="_blank">
            <button class="btn btn-n01">制作APP</button>
          </a>
          <span class="pack-expire-notice">测试二维码和原始包下载，将在30分钟后失效，请尽快下载保存。</span>
        </div>
        <div class="pack-app-table-rect">
          <div class="table-outer-border" x-render="packListTable">
            <table cellpadding="0" cellspacing="0">
              <thead>
                <tr>
                  <th width="150">名称</th>
                  <th width="180">包名</th>
                  <th width="90">版本</th>
                  <th width="130">测试安装二维码</th>
                  <th width="100">剩余下载次数</th>
                  <th width="90">套餐</th>
                  <th width="100">原始包下载</th>
                  <th width="100">操作</th>
                </tr>
              </thead>
              <tbody x-repeat="appList">
                <tr>
                  <td x-type="名称">
                    <img x-src="appList[$0].icon_path" />
                    <span>{{appList[$0].app_name}}</span>
                  </td>
                  <td x-type="包名">
                    <span>{{appList[$0].package_name || 'no.package.name'}}</span>
                  </td>
                  <td x-type="版本">
                    <span>{{appList[$0].app_version}}</span>
                  </td>
                  <td x-type="测试连接">
                    <span class="short-link" x-if="{{m.appList[$0].issue_time != 0 && m.appList[$0].is_unshelve != 1}}">
                      <!--<a class="link" href="//{{getAppShortLink(m.appList[$0].app_id)}}">{{getAppShortLink(m.appList[$0].app_id)}}</a>-->
                      <span class="icon-qrcode">
                        <span class="iconfont">&#xe669;</span>
                        <div class="hover-qrcode">
                          <div class="notice">扫描二维码下载</div>
                          <div class="qrcode">
                            <img class="qrcode-img" qrcode-applink="{{m.appList[$0].app_id}}" />
                            <img class="inject-icon" x-src="appList[$0].icon_path" />
                          </div>
                        </div>
                      </span>
                    </span>
                    <span x-if="{{m.appList[$0].issue_time == 0}}">次数不足</span>
                    <span x-if="{{m.appList[$0].is_unshelve == 1}}">已过期</span>
                  </td>
                  <td x-type="下载次数">
                    <span>{{appList[$0].down_time || '0'}}</span>
                  </td>
                  <td x-type="套餐">{{appList[$0].level || '普通版'}}</td>
                  <td x-type="原始包下载">
                    <button x-if="{{m.appList[$0].down_time != 0  && m.appList[$0].is_unshelve != 1}}" x-event="downOrigin" x-index="$0" class="btn btn-n01 small">{{CONSTANT.APPDEVICE[m.appList[$0].device] + '下载'}}</button>
                    <span x-if="{{m.appList[$0].down_time == 0 && m.appList[$0].is_unshelve == 0}}" class="color-red">下载次数已用尽</span>
                    <span x-if="{{m.appList[$0].is_unshelve == 1 }}">已过期</span>
                  </td>
                  <td x-type="操作">
                    <a class="clickble" href="{{'/user/pack/detail/p/' + m.appList[$0].app_id}}" target="_blank">详情</a>
                    <!--<a class="clickble">编辑</a>-->
                    <a class="clickble" x-event="deleteApp" app-name="{{appList[$0].app_name}}" app-id="{{appList[$0].app_id}}">删除</a>
                  </td>
                </tr>
              </tbody>
            </table>
            <div class="no-app-notice-rect" x-if="{{(m.appList || []).length == 0}}">
              <div class="notice-icon">
                <span class="iconfont">&#xe693;</span>
              </div>
              <div class="notice-text">没有创建过APP</div>
              <div class="notice-btn">
                <a href="{{m.goPackLink}}" target="_blank">
                  <button class="btn btn-n01">立即创建</button>
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="foot" x-include="components/foot.tpl"></div>
</div>
</body>
</html>
